---
license: >
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
---

# 보안 가이드

다음은 당신이 코르도바 응용 프로그램을 개발할 때 고려해야 할 몇 가지 보안에 관련된 모범 사례를 제시하고 있습니다. 그러나 보안은 매우 복잡한 주제이기 떄문에 이 가이드로는 충분하지 않다는 점을 유의하시기 바랍니다. 만약 당신이 이 가이드에 기여할 수 있다면, ["문서"][1]아래의 코르도바 버그 추적기에 이슈를 기록하여 주시기 바랍니다. 이 가이드는 일반 코르도바 개발(모든 플랫폼)에 적용할 수 있도록 설계 되었습니다. 하지만 특별한 플랫폼 특정 고려 사항도 고려되어야 합니다.

 [1]: https://issues.apache.org/jira/browse/CB/component/12316407

## 이 가이드에서는 다음 항목을 설명합니다.

*   허용되는 사이트 목록
*   Iframe 과 콜백 Id 메커니즘
*   인증서 고정
*   자체 서명된 인증서
*   암호화된 저장소
*   일반적인 팁들
*   권장하는 문서 및 기타 리소스

## 허용된 사이트 목록

*   허용된 사이트 목록 지침을 읽고 이해하십시요.

*   허용된 도메인 목록 기능은 안드로이드 API 10 및 그 아래에 버젼, WP8 에서 iframe 과 XMLHttpRequest 에서는 작동하지 않습니다. 이것은 공격자가 iframe 에서 어떤 도메인도 로드할 수 있고, 그 iframe 안에 있는 어떠한 스크립트도 코르도바 JavaScript 개체와 해당하는 네이티브 Java 개체에 직접 액세스할 수 있다는 것을 의미합니다. 당신은 이러한 플랫폼에 대한 응용 프로그램을 작성할 때 이 사실을 고려하여야만 합니다. 실제로 이러한 점은 안드로이드 API를 대상을 10보다 높은 값으로 설정하여야 한다는 것을 의미하며, 가능하면 외부 콘텐츠를 로드하기 위하여 iframe 을 사용해서는 않된다는 것을 의미합니다. - inAppBrowser 플러그인이나 또는 다른 제3자 플러그인을 사용하십시요.

## Iframe 과 콜백 Id 메커니즘

만약 콘텐츠가 허용 도메인의 iframe 에서 제공되는 경우, 해당 도메인은 네이티브 코르도바 브릿지에 연결이 되어 있습니다. 이것은, 당신이 만약 제3자 광고 네트워크를 허용한다면, 그들은 iframe 통해 광고를 게재할 수 있고, 그것은 악의적인 광고가 iframe을 탈옥하고 악의적인 동작을 수행할 수 있다는 것을 의미합니다. 이점 때문에, 당신은 iframe 콘텐츠를 호스팅하는 서버를 제어하고 있지 않는 한 iframe 을 사용하여서는 않됩니다. 또한 광고 네트워크를 지원하기 위해 제3자 플러그인을 사용할 수 있다는 것을 참조 바랍니다. 그러나, iframe 접속시에 모든 것을 가로챌 수 있다는 것, iOS에서는 적용되지 않습니다.

## 인증서 고정

코르도바는 엄격한 의미의 인증서 고정을 지원하지 않습니다. 왜냐하면 아직 서버 인증서를 확인하기 위한 SSL 연결 가로채기에 대한 안드로이드 네이티브 API가 부족하기 떄문입니다. (물론 자바에 있는 JSSE를 사용하여 안드로이드에 인증서 고정 작업을 할 수는 있지만, 안드로이드의 webview는 C++ 로 작성이 되어 있고, webview 를 통하여 서버와 접속이 이루어지기 떄문에, 여기에서 자바와 JSSE를 사용하는 것은 불가능합니다.) 아파치 코르도바는 여러 플랫폼에서 일관된 API를 제공하기 위한 수단이기 떄문에, 주요 플랫폼에 대한 일관성을 꺨 수 있는 여지를 가질 수 없습니다.

인증서 고정을 위한 적절한 방법이 몇가지 있는데, 예를들어 응용 프로그램이 시작 될 때 또는 동작하는 중에 서버의 공개키(지문) 값이 기대치와 동일한지를 확인하는등의 방법이 있습니다. 코르도바를 위하여 그러한 작업을 수행하는 타사 플러그인도 있습니다. 그러나 사실 서버에 연결되는 모든 접속을 자동으로 검증하는 것은 실제 인증서 고정과는 동일하지는 않습니다.

## 자체 서명된 인증서

서버에 자체 서명된 인증서를 사용하는 것은 권장하지 않습니다. 만역 SSL을 원하는 경우, 서버가 반듯이 제대로 잘 알려진 CA (인증 기관)에서 서명된 인증서를 가지고 있는것을 추천합니다. 실제 인증서 고정을 할 수 없다는 점 때문에 이것은 매우 중요합니다.

그 이유는 인증서 체인 유효성 검사를 우회한 자체 서명된 인증서가 승락되면, 그 기기에는 어떠한 서버 인증서도 유효하다고 간주하기 때문입니다. 이것은 man-in-the-middle 공격을 위한 통신을 열게 합니다. 뿐만 아니라 해커는 기기와 서버 간의 모든 통신을 읽고 가로채는 것 뿐만 아니라, 통신의 변조도 매우 쉽게 할 수 있습니다. 기기는 서버의 인증서가 신뢰할 수 있는 CA에서 서명되었는지 확인하지 않기 때문에 이러한 일이 발생하고 있는지 절대 알 수 가 없습니다. 기기는 서버가 예상하는 있는 서버인지 증명할 수 있는 방법이 없습니다. man-in-the-middle 공격을 하는 것은 매우 쉽기 때문에, 자체 서명된 인증서를 수락하는 것은 신뢰할 수 없는 네트워크에 https 대신에 http를 실행하는 것보다 조금 더 좋을 뿐입니다. 물론, 트래픽은 암호화 되어 있을 수 있습니다. 하지만 man-in-the-middle 에서 그 key 를 같고 암호화를 할 수 있기 때문애, 왜냐하면 man-in-the-middle 은 통신의 모든 것을 액세스할 수 있습니다, 수동적 사용자에게는 암호화는 큰 의마가 없습니다. 사용자는 SSL이 안전하다고 믿습니다. 하지만 안전하지 못하게 만들 수 있기 때문에, SSL 에 오해를 줄 수 있습니다. 만약 신뢰할 수 있는 네트워크에서 사용하는 경우 (즉, 당신이 완전히 통제 기업 안에 있다면)에도 자체 서명된 인증서는 권장하지 않습니다. 신뢰할 수 있는 네트워크에서는 두 가지의 추천사항이 있는데, 네트워크 자체를 신뢰할 수 있기 때문에 그냥 http 를 사용하거나, 신뢰할 수 있는 네트워크를 사용하건 안하건, 신뢰할 수 있는 CA에 의해 서명된 인증서 (자체 서명되지 않는)를 사용하는 것입니다.

여기에서 설명된 원칙들은 아파치 코르도바에 한정되지 않고, 모든 클라이언트-서버 통신에 적용할 수 있습니다.

안드로이드에서 코르도바를 실행하는 경우, `android:debuggable="true"` 를 사용하여, 응용 프로그램 매니페스트에서 자체 서명된 인증서의 인증서 체인 유효성 검사의 SSL 오류를 허용할 수 있습니다. 따라서 이 구성에서는 자체 서명된 인증서를 사용할 수 있습니다. 하지만 이것은 프로덕션 환경에서 응용 프로그램을 사용해야 하는 구성은 아닙니다. 그것은 단지 응용 프로그램 개발 중에만 사용할 수 있다는 의미입니다.

## 암호화된 저장소

(TBD)

## 일반적인 팁들

### 안드로이드 진저브레드를 사용하지 마십시오!

*   최소 대상 sdk 레벨을 10 보다 높게 설정합십시요. API 10은 진저브레드입니다. 그리고 이것은 Google 또는 장치 제조 업체에 의해 더 이상 지원되지 않습니다. 따라서 코르도바 팀에서도 더이상 추천하지 않습니다. 
*   진저브레드는 더 이상 안전하지 않은 것으로 알려졌고, 가장 많은 공격 대상 모바일 OS 중의 하나입니다. [http://www.mobilemag.com/2012/11/06/andriod-2-3-gingerbread-security/][2]. 
*   안드로이드에서 화이트 리스트 설정은 진저 브레드 또는 보다 낮은 버젼에서는 작동하지 않습니다. 즉, 공격자는 iframe에 악성 코드를 심어서 코르도바 모든 API를 액세스할 수 있으며, 개인 데이터를 도용하거나, 프리미엄 요금 번호로 SMS 메시지를 보낼 수 있으며, 다른 여러 악의적인 행위를 할 수 있습니다. 

 [2]: http://bgr.com/2012/11/06/android-security-gingerbread-malware/

### 외부 링크는 InAppBrowser를 사용하십시요. 

*   외부 웹사이트에 링크를 열 때는 항상 InAppBrowser를 사용하십시요. 이것은 도메인 이름을 화이트 리스트에 설정하거나 당신의 앱에 직접 콘텐츠를 포함하는 것보다 훨씬 안전합니다. 왜냐하면 InAppBrowser는 네이티브 브라우저의 보안 기능을 사용하기 떄문에 당신의 코르도바 환경에 영향을 주는 웹사이트에 접속을 허용하지 않습니다. 당신이 타사 웹 사이트를 신뢰하고, 응용 프로그램에 직접 포함하고 있더라도, 그 제3자 웹사이트는 악성 웹 콘텐츠에 연결할 수 있습니다. 

### 모든 사용자 입력의 유효성을 검사합니다.

*   항상 응용 프로그램이 받아드리는 그 어떠한 것이든 모든 입력의 유효성을 검사합니다. 여기에는 사용자 이름, 암호, 날짜, 업로드된 미디어 등등이 포함됩니다. 또 공격자는 HTML과 JS 자산을 조작할 수 있기 때문에 (또는 응용 프로그램을 디컴파일하거나 chrome://inspect 같은 디버깅 도구를 사용하여), 이 유효성 검사는 당신의 서버단에서도 수행해야 합니다. 특히 모든 백엔드 서비스에 데이터를 전달하기 전에는 반듯이 수행하여야 합니다. 
*   데이터 유효성을 검사를 해야할 또 다른 소스들: 사용자 문서, 연락처, 푸시 통지등

### 민감한 데이터를 캐시하지 않습니다.

*   만약 사용자 이름, 암호, 위치 정보 정보 및 기타 중요한 데이터를 캐시하는 경우, 그것은 나중에 검색할 권한이 없는 사용자 또는 응용 프로그램에 의해 정보가 끄집어 내어질 가능성이 항상 있습니다.

### 당신이 무슨 일을 하고 있는지 알고 있지 않으면 eval ()을 사용하지 마십시오.

*   자바스크립트 함수 eval ()는 남용의 오랜 역사를 가지고 있습니다. 잘못 사용하면 그것은 주입 공격, 어려움, 및 느린 코드 실행 디버깅을 위해 코드를 열 수 있습니다. 

### 당신의 소스 코드가 보안에 안전하다고 가정하지 마십시오.

*   코르도바 응용 프로그램은 네이티브 컨테이너에 안에서는 확인할 수 있는 packaged HTML과 자바스크립트들로 빌드되었기 때문에, 당신의 코드가 안전하다고 고려해서는 안됩니다. 항상 코르도바 응용 프로그램은 리버스 엔지니어링이 가능합니다. 

## 권장하는 문서 및 기타 리소스

*   [HTML5 응용 프로그램을 보호하는 방법을 자세히 설명하는 HTML5 보안 치트 시트][3]
*   [암호화된 데이터의 사용등 기기 보안에 관한 Phonegap의 문서][4]
*   [하이브리드 응용 프로그램 기반 Webview에서 잘 알려진 보안 결함에 대한 백서][5]

 [3]: https://www.owasp.org/index.php/HTML5_Security_Cheat_Sheet
 [4]: https://github.com/phonegap/phonegap/wiki/Platform-Security
 [5]: http://www.cis.syr.edu/~wedu/Research/paper/webview_acsac2011.pdf